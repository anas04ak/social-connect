<div class="container mt-5 d-flex justify-content-center">
  <div class="card border-0 shadow-lg p-4" style="max-width: 500px; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-radius: 1.5rem;">
    <div class="card-body text-center">

        <% if @user == current_user %>
            <div class="mt-3 text-center">
                <%= link_to "✏️ Edit Profile", edit_user_path(@user), class: "btn btn-outline-gradient px-4 py-2 rounded-pill fw-semibold" %>
            </div>
        <% end %>

      <% if @user.avatar.attached? %>
        <%= image_tag @user.avatar, class: "rounded-circle mb-3 shadow", width: 120, height: 120 %>
      <% else %>
        <%= image_tag "default_avatar.png", class: "rounded-circle mb-3 shadow", width: 120, height: 120 %>
      <% end %>

      <h4 class="fw-bold text-gradient mb-1">
        <%= @user.username.presence || "No Username Set" %>
      </h4>

      <p class="text-muted mb-2">
        <i class="bi bi-envelope-fill me-1"></i> <%= @user.email %>
      </p>

      <% if @user.date_of_birth.present? %>
        <p class="mb-0">
          <span class="badge bg-secondary-subtle text-dark fw-medium">Age: <%= current_user.age %> years</span>
        </p>
      <% else %>
        <p class="mb-0">
          <span class="badge bg-light text-muted">Age not provided</span>
        </p>
      <% end %>
    </div>

    <% if user_signed_in? && current_user == @user %>
  <%= form_with url: connect_instagram_path, method: :post, local: true do |form| %>
    <div class="mb-3">
      <%= form.label :instagram_url, "Connect to Instagram" %>
      <%= form.text_field :instagram_url, placeholder: "https://www.instagram.com/your_profile", class: "form-control" %>
    </div>
    <%= form.submit "Connect", class: "btn btn-gradient" %>
  <% end %>
<% end %>

  </div>
</div>
